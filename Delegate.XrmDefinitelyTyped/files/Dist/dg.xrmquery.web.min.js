var $jscomp={scope:{},checkStringArgs:function(a,g,e){if(null==a)throw new TypeError("The 'this' value for String.prototype."+e+" must not be null or undefined");if(g instanceof RegExp)throw new TypeError("First argument to String.prototype."+e+" must not be a regular expression");return a+""}};
$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,g,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[g]=e.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,g,e,c){if(g){e=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var k=a[c];k in e||(e[k]={});e=e[k]}a=a[a.length-1];c=e[a];g=g(c);g!=c&&null!=g&&$jscomp.defineProperty(e,a,{configurable:!0,writable:!0,value:g})}};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,e){var c=$jscomp.checkStringArgs(this,a,"startsWith");a+="";for(var g=c.length,h=a.length,l=Math.max(0,Math.min(e|0,c.length)),p=0;p<h&&l<g;)if(c[l++]!=a[p++])return!1;return p>=h}},"es6-impl","es3");
$jscomp.polyfill("String.prototype.endsWith",function(a){return a?a:function(a,e){var c=$jscomp.checkStringArgs(this,a,"endsWith");a+="";void 0===e&&(e=c.length);for(var g=Math.max(0,Math.min(e|0,c.length)),h=a.length;0<h&&0<g;)if(c[--g]!=a[--h])return!1;return 0>=h}},"es6-impl","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;
$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.arrayIterator=function(a){var g=0;return $jscomp.iteratorPrototype(function(){return g<a.length?{done:!1,value:a[g++]}:{done:!0}})};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};
$jscomp.iteratorFromArray=function(a,g){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var e=0,c={next:function(){if(e<a.length){var k=e++;return{value:g(k,a[k]),done:!1}}c.next=function(){return{done:!0,value:void 0}};return c.next()}};c[Symbol.iterator]=function(){return c};return c};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");
var __extends=this&&this.__extends||function(a,g){function e(){this.constructor=a}for(var c in g)g.hasOwnProperty(c)&&(a[c]=g[c]);a.prototype=null===g?Object.create(g):(e.prototype=g.prototype,new e)},XrmQuery;
(function(a){function g(a,e,h,l,g,r){void 0===g&&(g=function(){});var c=new XMLHttpRequest;c.open(a,e,!0);c.setRequestHeader("Accept","application/json");c.setRequestHeader("Content-Type","application/json; charset=utf-8");c.setRequestHeader("OData-MaxVersion","4.0");c.setRequestHeader("OData-Version","4.0");r&&r(c);c.onreadystatechange=function(){4==this.readyState&&(c.onreadystatechange=null,200==this.status||204==this.status?l(this):g(Error(this.response)))};c.send(h)}function e(a,e,h,l,p,r){g(a,
encodeURI(XQW.getApiUrl()+e),h,l,p,r)}a.retrieve=function(a,e){return XQW.RetrieveRecord.Get(a,e)};a.retrieveMultiple=function(a){return XQW.RetrieveMultipleRecords.Get(a)};a.retrieveRelated=function(a,e,h){return XQW.RetrieveRecord.Related(a,e,h)};a.retrieveRelatedMultiple=function(a,e,h){return XQW.RetrieveMultipleRecords.Related(a,e,h)};a.create=function(a,e){return new XQW.CreateRecord(a,e)};a.update=function(a,e,h){return new XQW.UpdateRecord(a,e,h)};a.deleteRecord=function(a,e){return new XQW.DeleteRecord(a,
e)};a.setApiUrl=function(a){XQW.ApiUrl=a};a.setApiVersion=function(a){XQW.ApiUrl=XQW.getDefaultUrl(a)};a.request=g;a.sendRequest=e;a.promiseRequest=function(a,g,h,l){XQW.promisifyCallback(function(c,k){return e(a,g,h,c,k,l)})}})(XrmQuery||(XrmQuery={}));var Filter;
(function(a){function g(a){return null==a?"null":"string"===typeof a?"'"+a+"'":a instanceof Date?a.toISOString():a.toString()}function e(a,c,e){return g(a)+" "+c+" "+g(e)}function c(a,c,e){return a+"("+g(c)+", "+g(e)+")"}function k(a,c){var e=a.pop();return a.reduceRight(function(a,e){return"("+e+" "+c+" "+a+")"},e)}a.equals=function(a,c){return e(a,"eq",c)};a.notEquals=function(a,c){return e(a,"ne",c)};a.greaterThan=function(a,c){return e(a,"gt",c)};a.greaterThanOrEqual=function(a,c){return e(a,
"ge",c)};a.lessThan=function(a,c){return e(a,"lt",c)};a.lessThanOrEqual=function(a,c){return e(a,"le",c)};a.and=function(a,c){return"("+a+" and "+c+")"};a.or=function(a,c){return"("+a+" or "+c+")"};a.not=function(a){return"not "+a};a.ands=function(a){return k(a,"and")};a.ors=function(a){return k(a,"or")};a.startsWith=function(a,e){return c("startswith",a,e)};a.substringOf=function(a,e){return c("substringof",a,e)};a.endsWith=function(a,e){return c("endswith",a,e)};a.makeGuid=function(a){return XQW.makeTag(a)}})(Filter||
(Filter={}));var XQW;
(function(a){function g(a,b){if(r.test(b))return new Date(b);var d=a,f;(f="@OData.Community.Display.V1.FormattedValue"==d.substr(-42))&&(d=d.substr(0,d.length-42));var m;if(m="_"==d.substr(0,1))m="_value"==d.substr(-6);m&&(d=d.substr(1,d.length-7),f||(d+="_guid"));f&&(d+="_formatted");if(d!=a)this[d]=b;else return b}function e(a){if(!Promise)throw Error("Promises are not natively supported in this browser. Add a polyfill to use it.");return new Promise(function(b,d){a(b,d)})}function c(c){var b,d;
d=c.toString().match(v);if(!d)throw Error("XrmQuery: Unable to properly parse function: "+c.toString());b=d[1];d=d[2];b=new RegExp("\\b"+b+"\\.([a-zA-Z_$][0-9a-zA-Z_$]*)(\\.([a-zA-Z_$][0-9a-zA-Z_$]*))?","g");for(var f={},m;null!=(m=b.exec(d));)f[m[1]]||(f[m[1]]=a.makeTag(m[1])),m[3]&&(f[m[1]][m[3]]=a.makeTag(m[1]+"/"+m[3]));return c(f)}function k(a){var b;if(GetGlobalContext&&GetGlobalContext().getClientUrl)b=GetGlobalContext().getClientUrl();else if(Xrm&&Xrm.Page&&Xrm.Page.context)try{b=Xrm.Page.context.getClientUrl()}catch(d){throw Error("Xrm.Page.context.getClientUrl is not available.");
}else throw Error("Context is not available.");return b+("/api/data/v"+a+"/")}function h(a){return c(a).map(function(a){a=a.toString();var d=a.indexOf("_guid");a=-1==d?a:"_"+a.substr(0,d)+"_value";return a})}function l(a){if(a instanceof Object){var b={};Object.keys(a).forEach(function(d){var f=l(a[d]),c=d.indexOf("_bind$");if(0<=c){var e=d.substr(c+6);b[d.substr(0,c)+"@odata.bind"]="/"+e+"("+f+")"}else b[d]=f});return b}if(a instanceof Array){var d=[];a.forEach(function(a,b){return d[b]=l(a)});return d}return a}
var p={type:"Prefer",value:'odata.include-annotations="OData.Community.Display.V1.FormattedValue"'};a.makeTag=function(a){return{__str:a,toString:function(){return this.__str}}};var r=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/;a.promisifyCallback=e;var n=function(){function a(a,d,f){var b=this;this.toReturn=a;this.successCallback=d;this.errorCallback=f;this.missingCallbacks=0;this.isDoingWork=this.isDoneSending=!1;this.callbackReceived=function(){b.missingCallbacks--;b.allSent&&0==b.missingCallbacks&&
b.successCallback(b.toReturn)}}a.prototype.followLink=function(a,d,f){var b=this;this.performingCallback();XrmQuery.request("GET",a,null,function(a){a=JSON.parse(a.response,g);t.followLinks(a,d,function(a){f(a);b.callbackReceived()},b.errorCallback)},function(a){b.callbackReceived();b.errorCallback(a)})};a.prototype.populateRecord=function(a,d){this.performingCallback();u.followLinks(a,d,this.callbackReceived,this.errorCallback)};a.prototype.allSent=function(){if(!this.isDoingWork)return this.successCallback(this.toReturn);
this.isDoneSending=!0};a.prototype.performingCallback=function(){this.missingCallbacks++;this.isDoingWork=!0};return a}(),u=function(a){function b(d,b,c,e){var f=a.call(this,d,c,e)||this;b.forEach(function(a){var b=d[a.linkKey];b&&(delete d[a.linkKey],f.followLink(b,[],function(b){d[a.arrKey]=d[a.arrKey].concat(b)}))});f.allSent();return f}__extends(b,a);b.followLinks=function(a,f,c,e){if(0==f.length)return c(a);0<f.length&&"string"===typeof f[0]&&(f=f.map(function(a){return{arrKey:a,linkKey:a+"@odata.nextLink"}}));
return new b(a,f,c,e)};return b}(n),t=function(a){function b(d,b,c,e){var f=a.call(this,d.value,c,e)||this;(c=d["@odata.nextLink"])&&f.followLink(c,b,function(a){f.toReturn=f.toReturn.concat(a)});0<b.length&&d.value.forEach(function(a){return f.populateRecord(a,b)});f.allSent();return f}__extends(b,a);b.followLinks=function(a,f,c,e){if(!a["@odata.nextLink"]&&(0==a.value.length||0==f.length))return c(a.value);if(0==f.length)return new b(a,[],c,e);0<f.length&&"string"===typeof f[0]&&(f=f.map(function(a){return{arrKey:a,
linkKey:a+"@odata.nextLink"}}));if(0==a.value.length)return new b(a,f,c,e);var d=a.value[0];f=f.filter(function(a){return d[a.linkKey]});return new b(a,f,c,e)};return b}(n),n=function(){function a(a){this.requestType=a;this.additionalHeaders=[];this.getObjectToSend=function(){return null}}a.prototype.promise=function(){return e(this.execute)};a.prototype.execute=function(a,d){void 0===d&&(d=function(){});this.executeRaw(a,d,!0)};a.prototype.executeRaw=function(a,d,c){var b=this;void 0===d&&(d=function(){});
void 0===c&&(c=!1);return XrmQuery.sendRequest(this.requestType,this.getQueryString(),this.getObjectToSend(),function(f){return c?b.handleResponse(f,a,d):a(f)},d,function(a){return b.additionalHeaders.forEach(function(d){return a.setRequestHeader(d.type,d.value)})})};return a}();a.Query=n;var q=function(a){function b(d,b,c){var f=a.call(this,"GET")||this;f.entitySetName=d;f.id=b;f.relatedNav=c;f.specialQuery=void 0;f.selects=[];f.expands=[];f.expandKeys=[];f.ordering=[];f.skipAmount=null;f.topAmount=
null;return f}__extends(b,a);b.Get=function(a){return new b(c(a).toString())};b.Related=function(a,f,e){return new b(c(a).toString(),f,c(e).toString())};b.prototype.handleResponse=function(a,b,c){t.followLinks(JSON.parse(a.response,g),this.expandKeys,b,c)};b.prototype.getFirst=function(a,b){this.top(1);this.execute(function(d){return a(d&&0<d.length?d[0]:null)},b)};b.prototype.promiseFirst=function(){return e(this.getFirst)};b.prototype.getQueryString=function(){var a=this.entitySetName;this.id&&
this.relatedNav&&(a+="("+this.id+")/"+this.relatedNav);if(this.specialQuery)return a+this.specialQuery;var b=[];0<this.selects.length&&b.push("$select="+this.selects.join(","));0<this.expands.length&&b.push("$expand="+this.expands.join(","));this.filters&&b.push("$filter="+this.filters);0<this.ordering.length&&b.push("$orderby="+this.ordering.join(","));null!=this.skipAmount&&b.push("$skip="+this.skipAmount);null!=this.topAmount&&b.push("$top="+this.topAmount);return a+(0<b.length?"?"+b.join("&"):
"")};b.prototype.select=function(a){this.selects=h(a);return this};b.prototype.selectMore=function(a){this.selects=this.selects.concat(h(a));return this};b.prototype.expand=function(a,b){var d=c(a).toString();this.selects.push(d);this.expandKeys.push(d);var f=[];b&&f.push("$select="+h(b));this.expands.push(d+(0<f.length?"("+f.join(";")+")":""));return this};b.prototype.filter=function(a){this.filters=c(a);return this};b.prototype.orFilter=function(a){this.filters?this.filters=Filter.or(this.filters,
c(a)):this.filter(a);return this};b.prototype.andFilter=function(a){this.filters?this.filters=Filter.and(this.filters,c(a)):this.filter(a);return this};b.prototype.order=function(a,b){this.ordering.push(c(a)+" "+b);return this};b.prototype.orderAsc=function(a){return this.order(a,"asc")};b.prototype.orderDesc=function(a){return this.order(a,"desc")};b.prototype.skip=function(a){this.skipAmount=a;return this};b.prototype.top=function(a){this.topAmount=a;return this};b.prototype.maxPageSize=function(a){this.additionalHeaders.push({type:"Prefer",
value:"odata.maxpagesize="+a});return this};b.prototype.includeFormattedValues=function(){this.additionalHeaders.push(p);return this};b.prototype.useFetchXml=function(a){this.specialQuery="?fetchXml="+encodeURI(a);return this};b.prototype.usePredefinedQuery=function(a,b){this.specialQuery="?"+a+"="+b;return this};return b}(n);a.RetrieveMultipleRecords=q;q=function(a){function b(b,c,e){var d=a.call(this,"GET")||this;d.entitySetName=b;d.id=c;d.relatedNav=e;d.selects=[];d.expands=[];d.expandKeys=[];
return d}__extends(b,a);b.Related=function(a,f,e){return new b(c(a).toString(),f,c(e).toString())};b.Get=function(a,f){return new b(c(a).toString(),f)};b.prototype.handleResponse=function(a,b,c){u.followLinks(JSON.parse(a.response,g),this.expandKeys,b,c)};b.prototype.select=function(a){this.selects=h(a);return this};b.prototype.selectMore=function(a){this.selects=this.selects.concat(h(a));return this};b.prototype.expand=function(a,b,e){a=c(a).toString();this.selects.push(a);this.expandKeys.push(a);
var d=[];b&&d.push("$select="+h(b));e&&(e.top&&d.push("$top="+e.top),e.orderBy&&d.push("$orderby="+c(e.orderBy)+" "+(2!=e.sortOrder?"asc":"desc")),e.filter&&d.push("$filter="+c(e.filter)));this.expands.push(a+(0<d.length?"("+d.join(";")+")":""));return this};b.prototype.getQueryString=function(){var a=[];0<this.selects.length&&a.push("$select="+this.selects.join(","));0<this.expands.length&&a.push("$expand="+this.expands.join(","));var b=this.entitySetName+"("+this.id+")";this.relatedNav&&(b+="/"+
this.relatedNav);return b+(0<a.length?"?"+a.join("&"):"")};b.prototype.includeFormattedValues=function(){this.additionalHeaders.push(p);return this};return b}(n);a.RetrieveRecord=q;q=function(a){function b(b,e){var d=a.call(this,"POST")||this;d.record=e;d.getObjectToSend=function(){return JSON.stringify(l(d.record))};d.entitySetName=c(b).toString();return d}__extends(b,a);b.prototype.handleResponse=function(a,b,c){(a=a.getResponseHeader("OData-EntityId"))?b(a.substr(-37,36)):c(Error("No valid OData-EntityId found in header."))};
b.prototype.setData=function(a){this.record=a;return this};b.prototype.getQueryString=function(){return this.entitySetName};return b}(n);a.CreateRecord=q;q=function(a){function b(b,e){var d=a.call(this,"DELETE")||this;d.id=e;d.entitySetName=c(b).toString();return d}__extends(b,a);b.prototype.handleResponse=function(a,b){b()};b.prototype.setId=function(a){this.id=a;return this};b.prototype.getQueryString=function(){return this.entitySetName+"("+this.id+")"};return b}(n);a.DeleteRecord=q;n=function(a){function b(b,
e,g){var d=a.call(this,"PATCH")||this;d.id=e;d.record=g;d.getObjectToSend=function(){return JSON.stringify(l(d.record))};d.entitySetName=c(b).toString();return d}__extends(b,a);b.prototype.handleResponse=function(a,b){b()};b.prototype.setData=function(a,b){this.id=a;this.record=b;return this};b.prototype.getQueryString=function(){return this.entitySetName+"("+this.id+")"};return b}(n);a.UpdateRecord=n;var v=/function[^\(]*\(([a-zA-Z0-9_]+)[^\{]*\{([\s\S]*)\}$/m;a.ApiUrl=null;a.getDefaultUrl=k;a.getApiUrl=
function(){null===a.ApiUrl&&(a.ApiUrl=k("8.0"));return a.ApiUrl}})(XQW||(XQW={}));
